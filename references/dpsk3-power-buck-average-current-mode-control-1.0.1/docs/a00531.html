<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Digital Power Starter Kit 3 Firmware: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: #000000;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 36px;">
  <td id="projectlogo" style="padding-left: 0.2em; vertical-align: middle;"><img alt="Logo" src="microchip-docs.png"/></td>
  <td id="projectalign" style="padding-left: 0.0em;">
   <div id="projectname" style="color: white; font-size:16px;">Digital Power Starter Kit 3 Firmware
   </div>
   <div id="projectbrief" style="color: grey; font-size:12px;">dsPIC33C Buck Converter Average Current Mode Control Example</div>
  </td>
   <td style="padding-top: 10px; height: 20px; vertical-align: top;">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00531.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="a00568.html">Library Driver Layer</a> &raquo; <a class="el" href="a00530.html">Power Converter Control Driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Public functions of the Power Converter Control driver.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Functions:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00531.svg" width="299" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3d32e66188691f64885c2223f6e08d20"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#ga3d32e66188691f64885c2223f6e08d20">i_loop_Initialize</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:ga3d32e66188691f64885c2223f6e08d20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes controller coefficient arrays and normalization factors.  <a href="a00531.html#ga3d32e66188691f64885c2223f6e08d20">More...</a><br /></td></tr>
<tr class="separator:ga3d32e66188691f64885c2223f6e08d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaade67bca1738eccdbf511c980e79339f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#gaade67bca1738eccdbf511c980e79339f">i_loop_Reset</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:gaade67bca1738eccdbf511c980e79339f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly routine '_i_loop_Reset' clearing the NPNZ16b controller output and error histories.  <a href="a00531.html#gaade67bca1738eccdbf511c980e79339f">More...</a><br /></td></tr>
<tr class="separator:gaade67bca1738eccdbf511c980e79339f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15932f07e150c94059c8dc35566dfa36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#ga15932f07e150c94059c8dc35566dfa36">i_loop_Precharge</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller, volatile fractional ctrl_input, volatile fractional ctrl_output)</td></tr>
<tr class="memdesc:ga15932f07e150c94059c8dc35566dfa36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly routine '_i_loop_Precharge' loading user-defined values into the NPNZ16b controller output and error histories.  <a href="a00531.html#ga15932f07e150c94059c8dc35566dfa36">More...</a><br /></td></tr>
<tr class="separator:ga15932f07e150c94059c8dc35566dfa36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb19529055f7bef1a4817c3005605c23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#gaeb19529055f7bef1a4817c3005605c23">i_loop_Update</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:gaeb19529055f7bef1a4817c3005605c23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly feedback control loop routine helping to call the i_loop controller from C-code.  <a href="a00531.html#gaeb19529055f7bef1a4817c3005605c23">More...</a><br /></td></tr>
<tr class="separator:gaeb19529055f7bef1a4817c3005605c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62d45a18f3dd47fa691fbb463f90e051"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#ga62d45a18f3dd47fa691fbb463f90e051">v_loop_Initialize</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:ga62d45a18f3dd47fa691fbb463f90e051"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes controller coefficient arrays and normalization factors.  <a href="a00531.html#ga62d45a18f3dd47fa691fbb463f90e051">More...</a><br /></td></tr>
<tr class="separator:ga62d45a18f3dd47fa691fbb463f90e051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb35e824b8586b680f54d59975ada3c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#gabb35e824b8586b680f54d59975ada3c7">v_loop_Reset</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:gabb35e824b8586b680f54d59975ada3c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly routine '_v_loop_Reset' clearing the NPNZ16b controller output and error histories.  <a href="a00531.html#gabb35e824b8586b680f54d59975ada3c7">More...</a><br /></td></tr>
<tr class="separator:gabb35e824b8586b680f54d59975ada3c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cdf7d86ab440015768706f04bd588e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#ga3cdf7d86ab440015768706f04bd588e9">v_loop_Precharge</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller, volatile fractional ctrl_input, volatile fractional ctrl_output)</td></tr>
<tr class="memdesc:ga3cdf7d86ab440015768706f04bd588e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly routine '_v_loop_Precharge' loading user-defined values into the NPNZ16b controller output and error histories.  <a href="a00531.html#ga3cdf7d86ab440015768706f04bd588e9">More...</a><br /></td></tr>
<tr class="separator:ga3cdf7d86ab440015768706f04bd588e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8180f1cb973d694be5caffaec3ce940"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#gab8180f1cb973d694be5caffaec3ce940">v_loop_Update</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:gab8180f1cb973d694be5caffaec3ce940"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the Assembly feedback control loop routine helping to call the v_loop controller from C-code.  <a href="a00531.html#gab8180f1cb973d694be5caffaec3ce940">More...</a><br /></td></tr>
<tr class="separator:gab8180f1cb973d694be5caffaec3ce940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac782e99f408e1d33286076e69a14f781"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00531.html#gac782e99f408e1d33286076e69a14f781">v_loop_PTermUpdate</a> (volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *controller)</td></tr>
<tr class="memdesc:gac782e99f408e1d33286076e69a14f781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of the alternate Assembly P-Term control loop helping to call the v_loop P-Term controller from C-code.  <a href="a00531.html#gac782e99f408e1d33286076e69a14f781">More...</a><br /></td></tr>
<tr class="separator:gac782e99f408e1d33286076e69a14f781"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Public functions of the Power Converter Control driver. </p>
<p>This is the detailed description of public API functions of the Power Converter Control driver listing all available public functions of each individual feedback loop object. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3d32e66188691f64885c2223f6e08d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d32e66188691f64885c2223f6e08d20">&#9670;&nbsp;</a></span>i_loop_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t i_loop_Initialize </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes controller coefficient arrays and normalization factors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ Controller Data Object of type struct <a class="el" href="a01736.html" title="Global NPNZ controller data object.">NPNZ16b_s</a></td></tr>
  </table>
  </dd>
</dl>
<p>This function needs to be called from user code at startup once to initialize coefficient arrays and number normalization settings of the i_loop controller object.</p>
<dl class="section attention"><dt>Attention</dt><dd>This routine DOES NOT initialize the complete controller object. User-defined settings such as pointers to the control reference, source and target registers, output minima and maxima and further, design-dependent settings, need to be specified in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00302_source.html#l00095">95</a> of file <a class="el" href="a00302_source.html">i_loop.c</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00531_ga3d32e66188691f64885c2223f6e08d20_cgraph.svg" width="267" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_ga3d32e66188691f64885c2223f6e08d20_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga15932f07e150c94059c8dc35566dfa36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga15932f07e150c94059c8dc35566dfa36">&#9670;&nbsp;</a></span>i_loop_Precharge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i_loop_Precharge </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile fractional&#160;</td>
          <td class="paramname"><em>ctrl_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile fractional&#160;</td>
          <td class="paramname"><em>ctrl_output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly routine '_i_loop_Precharge' loading user-defined values into the NPNZ16b controller output and error histories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s* </td></tr>
    <tr><td class="paramname">ctrl_input</td><td>user-defined, constant error history value of type fractional </td></tr>
    <tr><td class="paramname">ctrl_output</td><td>user-defined, constant control output history value of type fractional</td></tr>
  </table>
  </dd>
</dl>
<p>This function loads user-defined values into NPNZ16b controller output and error histories where the parameters ctrl_input and ctrl_output will written to the entire delay line of the filter emulating a pre-existing steady state operation under the user defined conditions. </p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_ga15932f07e150c94059c8dc35566dfa36_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gaade67bca1738eccdbf511c980e79339f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaade67bca1738eccdbf511c980e79339f">&#9670;&nbsp;</a></span>i_loop_Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i_loop_Reset </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly routine '_i_loop_Reset' clearing the NPNZ16b controller output and error histories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s*</td></tr>
  </table>
  </dd>
</dl>
<p>This Assembly function clears the NPNZ16b controller output and error histories by settings all elements of the delay lines to zero. This resets the controller to its default state. This function should be called every time before the control loop is started from a disabled, unbiased output. </p><dl class="section note"><dt>Note</dt><dd>Use function 'i_loop_Precharge' to start the feedback loop controller when the output is pre-biased. </dd></dl>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_gaade67bca1738eccdbf511c980e79339f_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gaeb19529055f7bef1a4817c3005605c23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb19529055f7bef1a4817c3005605c23">&#9670;&nbsp;</a></span>i_loop_Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i_loop_Update </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly feedback control loop routine helping to call the i_loop controller from C-code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s*</td></tr>
  </table>
  </dd>
</dl>
<p>This function is the main controller function which must be called at the control frequency from the control interrupt service routine. It calculates the most recent control error and processes it in the compensation filter computation after which the new result is written to the control output target. Runtime control is provided through the NPNZ16b data object status &amp; control word. </p><dl class="section note"><dt>Note</dt><dd>Available control options depend on the controller feature configuration. Please refer to the user guide for more detailed information. </dd></dl>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_gaeb19529055f7bef1a4817c3005605c23_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga62d45a18f3dd47fa691fbb463f90e051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62d45a18f3dd47fa691fbb463f90e051">&#9670;&nbsp;</a></span>v_loop_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t v_loop_Initialize </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes controller coefficient arrays and normalization factors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ Controller Data Object of type struct <a class="el" href="a01736.html" title="Global NPNZ controller data object.">NPNZ16b_s</a></td></tr>
  </table>
  </dd>
</dl>
<p>This function needs to be called from user code at startup once to initialize coefficient arrays and number normalization settings of the v_loop controller object.</p>
<dl class="section attention"><dt>Attention</dt><dd>This routine DOES NOT initialize the complete controller object. User-defined settings such as pointers to the control reference, source and target registers, output minima and maxima and further, design-dependent settings, need to be specified in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00317_source.html#l00103">103</a> of file <a class="el" href="a00317_source.html">v_loop.c</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00531_ga62d45a18f3dd47fa691fbb463f90e051_cgraph.svg" width="270" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_ga62d45a18f3dd47fa691fbb463f90e051_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga3cdf7d86ab440015768706f04bd588e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3cdf7d86ab440015768706f04bd588e9">&#9670;&nbsp;</a></span>v_loop_Precharge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v_loop_Precharge </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile fractional&#160;</td>
          <td class="paramname"><em>ctrl_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile fractional&#160;</td>
          <td class="paramname"><em>ctrl_output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly routine '_v_loop_Precharge' loading user-defined values into the NPNZ16b controller output and error histories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s* </td></tr>
    <tr><td class="paramname">ctrl_input</td><td>user-defined, constant error history value of type fractional </td></tr>
    <tr><td class="paramname">ctrl_output</td><td>user-defined, constant control output history value of type fractional</td></tr>
  </table>
  </dd>
</dl>
<p>This function loads user-defined values into NPNZ16b controller output and error histories where the parameters ctrl_input and ctrl_output will written to the entire delay line of the filter emulating a pre-existing steady state operation under the user defined conditions. </p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_ga3cdf7d86ab440015768706f04bd588e9_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gac782e99f408e1d33286076e69a14f781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac782e99f408e1d33286076e69a14f781">&#9670;&nbsp;</a></span>v_loop_PTermUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v_loop_PTermUpdate </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the alternate Assembly P-Term control loop helping to call the v_loop P-Term controller from C-code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s*</td></tr>
  </table>
  </dd>
</dl>
<p>This function has been added as extension function supporting the development process, introducing an alternative control loop able to replace the conventional compensation feedback loop with a simple P-Term controller, allowing users to perform measurements of the plant transfer function. To use this function, users may replace the default compensation feedback loop function call v_loop_Update by v_loop_PTermUpdate to perform the measurement.</p>
<p>This additional controller seamlessly fits into the controller data interface by using the same <a class="el" href="a01736.html" title="Global NPNZ controller data object.">NPNZ16b_s</a> data structure and does not need additional configuration or initialization.</p>
<dl class="section attention"><dt>Attention</dt><dd>THIS CONTROLLER IS USED FOR MEASUREMENTS OF THE PLANT TRANSFER FUNCTION ONLY. THIS LOOP IS BY DEFAULT UNSTABLE AND ONLY WORKS UNDER STABLE TEST CONDITIONS. DO NOT USE THIS CONTROLLER TYPE FOR NORMAL OPERATION </dd></dl>

</div>
</div>
<a id="gabb35e824b8586b680f54d59975ada3c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb35e824b8586b680f54d59975ada3c7">&#9670;&nbsp;</a></span>v_loop_Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v_loop_Reset </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly routine '_v_loop_Reset' clearing the NPNZ16b controller output and error histories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s*</td></tr>
  </table>
  </dd>
</dl>
<p>This Assembly function clears the NPNZ16b controller output and error histories by settings all elements of the delay lines to zero. This resets the controller to its default state. This function should be called every time before the control loop is started from a disabled, unbiased output. </p><dl class="section note"><dt>Note</dt><dd>Use function 'v_loop_Precharge' to start the feedback loop controller when the output is pre-biased. </dd></dl>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_gabb35e824b8586b680f54d59975ada3c7_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gab8180f1cb973d694be5caffaec3ce940"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8180f1cb973d694be5caffaec3ce940">&#9670;&nbsp;</a></span>v_loop_Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v_loop_Update </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01736.html">NPNZ16b_s</a> *&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of the Assembly feedback control loop routine helping to call the v_loop controller from C-code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>Pointer to NPNZ16b data object of type struct NPNZ16b_s*</td></tr>
  </table>
  </dd>
</dl>
<p>This function is the main controller function which must be called at the control frequency from the control interrupt service routine. It calculates the most recent control error and processes it in the compensation filter computation after which the new result is written to the control output target. Runtime control is provided through the NPNZ16b data object status &amp; control word. </p><dl class="section note"><dt>Note</dt><dd>Available control options depend on the controller feature configuration. Please refer to the user guide for more detailed information. </dd></dl>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00531_gab8180f1cb973d694be5caffaec3ce940_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <p style="height: 12px; padding-bottom: 8px; padding-right: 12px; vertical-align: bottom; text-align: right; font-size: 90%;">© 2021, Microchip Technology Inc.</p>
  </ul>
</div>
</body>
</html>
